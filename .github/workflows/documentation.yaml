# ! TODO: deployment workflow

# name: Deploy Documentation

# on:
#   push:
#     branches:
#       - "master"
#     paths:
#       - "apps/website/**"

# concurrency:
#   group: ${{ github.workflow }}-${{ github.ref }}-website-deployment
#   cancel-in-progress: true

# # ! TODO: add jobs to generate api docs, parse them into md and integrate into existing vite press site

# jobs:
#   lint:
#     timeout-minutes: 10
#     runs-on: ubuntu-latest
#     steps:
#       - name: Checkout
#         uses: actions/checkout@v2

#       - name: User Node.js LTS
#         uses: actions/setup-node@v2

#       - name: Install pnpm
#         uses: pnpm/action-setup@v2.2.4
#         with:
#           run_install: false

#       - name: Install Dependencies
#         run: pnpm install --frozen-lockfile

#       - name: Lint
#         run: yarn run lint

#       - name: Linter Failed
#         if: ${{ failure() }}
#         uses: actions/github-script@v5
#         with:
#           script: |
#             const { pullRequestData: data } = await github.rest.repos.listPullRequestsAssociatedWithCommit({
#                     owner: context.repo.owner,
#                     repo: context.repo.repo,
#                     commit_sha: context.payload.after
#                 })

#               if(pullRequestData[0]){
#                  await github.rest.issues.createComment({
#                       issue_number: pullRequestData[0].number,
#                       owner: context.repo.owner,
#                       repo: context.repo.repo,
#                       body: `### üö®  Linter failed`
#                   })
#               } else {
#                   throw new Error('Pull request data not found')
#               }
#   deploy:
#     environment: Production
#     timeout-minutes: 15
#     runs-on: ubuntu-latest
#     needs: [lint]
#     env:
#       VERCEL_ORG_ID: ${{ secrets.VERCEL_ORG_ID }}
#       VERCEL_PROJECT_ID: ${{ secrets.VERCEL_PROJECT_ID }}
#     steps:
#       - name: Checkout
#         uses: actions/checkout@v2

#       - name: User Node.js LTS
#         uses: actions/setup-node@v2

#       - name: Install Vercel CLI
#         run: yarn global add vercel@canary

#       - name: Install Dependencies
#         run: yarn install --frozen-lockfile

#       - name: Build
#         run: yarn run build

#       - name: Trigger Production Deployment
#         run: vercel deploy -y --prod --token=${{ secrets.VERCEL_TOKEN }} > deployment-url.txt

#       - name: Deployment Failure
#         if: ${{ failure() }}
#         uses: actions/github-script@v6
#         with:
#           script: |
#             const { data: pullRequestData } = await github.rest.repos.listPullRequestsAssociatedWithCommit({
#                   owner: context.repo.owner,
#                   repo: context.repo.repo,
#                   commit_sha: context.payload.after
#               })

#             // ! TODO: send notification either on slack or on discord

#             if(pullRequestData[0]){
#                await github.rest.issues.createComment({
#                     issue_number: pullRequestData[0].number,
#                     owner: context.repo.owner,
#                     repo: context.repo.repo,
#                     body: `#### ‚ùå Deployment failed:
#             `
#                 })
#             } else {
#             throw new Error('Pull request data not found')
#             }


